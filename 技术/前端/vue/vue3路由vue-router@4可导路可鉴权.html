<!DOCTYPE html> <html><head>
<title>Vue3路由vue-router@4可导路可鉴权</title>
<base href="../../..">
<meta id="root-path" root-path="../../..">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
<meta charset="UTF-8">
<meta name="description" content="尘影迹痕 - Vue3路由vue-router@4可导路可鉴权">
<meta property="og:title" content="Vue3路由vue-router@4可导路可鉴权">
<meta property="og:description" content="尘影迹痕 - Vue3路由vue-router@4可导路可鉴权">
<meta property="og:type" content="website">
<meta property="og:url" content="https://blog.cytl2.eu.org/技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html">
<meta property="og:image" content="https://article.biliimg.com/bfs/article/5ceb825dfa67a7a4db034254da22830b41f8907a.png">
<meta property="og:site_name" content="尘影迹痕">
<meta name="author" content="lzy"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://blog.cytl2.eu.org/lib/rss.xml"><include src="lib/html/custom-head-content.html"></include><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.svg"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript><link rel="preload" href="lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/snippets.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6):has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(const t of e){let e=t.getAttribute("src");try{const o=await fetch(e);if(!o.ok){console.log("Could not include file: "+e),t?.remove();continue}let l=await o.text(),n=document.createRange().createContextualFragment(l),c=Array.from(n.children);for(let e of c)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);t.before(n),t.remove(),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script></head><body class="publish css-settings-manager theme-light show-inline-title h2-underline tbMH-yuan tbMH-qk tbMH-ds-cg tbMH-kd-ncc-jy is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="导读"><p>导读</p></h1><div class="heading-wrapper"><div class="heading-children"><div><p>Vue Router 是 Vue.js 官方的路由管理器。在 Vue.js 应用程序中，Vue Router 为用户提供了灵活的路由配置方式，可以通过编写路由组件来实现页面跳转、参数传递、路由守卫等功能，为单页应用提供了完整的解决方案。</p></div><div><p>Vue Router@4 与之前的版本有所不同，它使用了新的 API 和语法糖，更加简洁易用。下面是 Vue Router@4 的一些新特性：</p></div><div><ol>
<li data-line="0">支持完整的 TypeScript 类型声明。</li>
<li data-line="1">使用 ES modules 和 webpack tree-shaking 以实现更小的 bundle size。</li>
<li data-line="2">支持动态路由和嵌套路由的新的声明方式。</li>
<li data-line="3">新增了一个 <code>createRouter()</code> 工厂函数来创建 router 实例，让使用更加灵活。</li>
<li data-line="4">支持自定义路由匹配规则和路由模式（hash、history、abstract）。</li>
</ol></div></div></div><div class="heading-wrapper"><h1 data-heading="安装" class="heading" id="安装">安装</h1><div class="heading-children"><div><p>注意版本，Vue3对应的是4</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">npm</span> <span class="token function">install</span> vue-router@4
</code><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h1 data-heading="创建 router" class="heading" id="创建_router">创建 router</h1><div class="heading-children"><div><p>首先创建一个 /src/router/a5router.ts 文件，在其中定义路由</p></div><div><pre class="language-typescript" tabindex="0"><code class="language-typescript is-loaded"><span class="token keyword">import</span> <span class="token punctuation">{</span>createRouter<span class="token punctuation">,</span> createWebHashHistory<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token constant">A51</span> <span class="token keyword">from</span> <span class="token string">'../views/A51.vue'</span>
<span class="token keyword">import</span> <span class="token constant">A52</span> <span class="token keyword">from</span> <span class="token string">'../views/A52.vue'</span>
<span class="token comment">// 路由 =&gt; 路径和组件之间的对应关系</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/a1'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token constant">A51</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/a2'</span><span class="token punctuation">,</span> 
    component<span class="token operator">:</span> <span class="token constant">A52</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 路径格式</span>
  routes<span class="token operator">:</span> routes <span class="token comment">// 路由数组</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code><button class="copy-code-button">复制</button></pre></div><div><ul>
<li data-line="0"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p>createWebHashHistory 是用 # 符号作为【单页面】跳转技术，上面两个路由访问时路径格式为</p>
<ul>
<li data-line="1">http://localhost:7070/#/a1</li>
<li data-line="2">http://localhost:7070/#/a2</li>
</ul>
</li>
<li data-line="4"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p>每个路由都有两个必须属性</p>
<ul>
<li data-line="6">
<p>path：路径</p>
</li>
<li data-line="8">
<p>component：组件</p>
</li>
</ul>
</li>
<li data-line="10">
<p>createRouter 用来创建 router 对象，作为默认导出</p>
</li>
</ul></div><div><p>需要在 main.ts 中导入 router 对象：</p></div><div><pre class="language-typescript" tabindex="0"><code class="language-typescript is-loaded"><span class="token comment">// ...</span>
<span class="token keyword">import</span> <span class="token constant">A5</span> <span class="token keyword">from</span> <span class="token string">'./views/A5.vue'</span>  <span class="token comment">// vue-router</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router/a5router'</span>
<span class="token function">createApp</span><span class="token punctuation">(</span><span class="token constant">A5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>antdv<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>A5 是根组件，不必在 router 中定义，但需要在其中定义 router-view，用来控制路由跳转后，A51、A52 这些组件的显示位置，内容如下</p></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"a5"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>效果如下</p></div><div><p><img alt="image-20220926145812121" src="https://article.biliimg.com/bfs/article/5ceb825dfa67a7a4db034254da22830b41f8907a.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p><img alt="image-20220926145959690" src="https://article.biliimg.com/bfs/article/8873bf3bd18a8f4401c520db238171c7f9f9e61a.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div></div></div><div class="heading-wrapper"><h1 data-heading="动态导入【推荐】" class="heading" id="动态导入【推荐】">动态导入【推荐】</h1><div class="heading-children"><div><pre class="language-typescript" tabindex="0"><code class="language-typescript is-loaded"><span class="token keyword">import</span> <span class="token punctuation">{</span>createRouter<span class="token punctuation">,</span> createWebHashHistory<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token constant">A51</span> <span class="token keyword">from</span> <span class="token string">'../views/A51.vue'</span>
<span class="token keyword">import</span> <span class="token constant">A52</span> <span class="token keyword">from</span> <span class="token string">'../views/A52.vue'</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// ...</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/a3'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A53.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code><button class="copy-code-button">复制</button></pre></div><div><ul>
<li data-line="0">用 import 关键字导入，效果是打包时会将组件的 js 代码都打包成一个大的 js 文件，如果组件非常多，会影响页面加载速度</li>
<li data-line="1"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>而 import 函数导入（动态导入），则是按需加载，即
<ul>
<li data-line="2">当路由跳转到 /a3 路径时，才会去加载 A53 组件对应的 js 代码</li>
<li data-line="3">vue-router 官方推荐采用动态导入</li>
</ul>
</li>
</ul></div></div></div><div class="heading-wrapper"><h1 data-heading="编程式导航和路由传参（待补充）" class="heading" id="编程式导航和路由传参（待补充）">编程式导航和路由传参（待补充）</h1><div class="heading-children"><div><p>参考：<a data-tooltip-position="top" aria-label="https://www.bilibili.com/video/BV1oL411P7JX/?p=3" rel="noopener" class="external-link is-unresolved" href="https://www.bilibili.com/video/BV1oL411P7JX/?p=3" target="_self">小满Router（第二章-命名路由-编程式导航）_哔哩哔哩_bilibili</a></p></div><div><p>编程式导航：通过route对象调用一些属性和方法实现页面的前进和后退</p></div><div><p>以及如何避免页面内组件切换产生页面刷新跳转和产生浏览器历史记录的问题</p></div><div><ul>
<li data-line="0">
<p>to</p>
</li>
<li data-line="2">
<p>go</p>
</li>
<li data-line="3">
<p>pre</p>
</li>
<li data-line="4">
<p>replace</p>
</li>
<li data-line="5">
<p>push（不刷新跳转~）</p>
</li>
</ul></div><div><p>路有传参：传递参数给另一个组件然后通过参数执行不同的页面渲染</p></div><div><ul>
<li data-line="0">query，路径后拼接</li>
<li data-line="1">params，在内存中传递</li>
</ul></div></div></div><div class="heading-wrapper"><h1 data-heading="路由元信息（待补充）" class="heading" id="路由元信息（待补充）">路由元信息（待补充）</h1><div class="heading-children"><div><p>其实很早之前在不少开源博客上也看到了“元信息”的概念，其实无非就是一些附带的属性，。</p></div><div><p>像Route每个路由我们都可以在定义的时候专门使用meta属性去记录和附加路由的元信息，把meta属性的值设置成JSON格式，里边包含title等各种键值对，像发生路由跳转的时候我们可以使用document.title修改跳转路由的页面对应名称（名称就是从元信息中title读取到的）</p></div></div></div><div class="heading-wrapper"><h1 data-heading="路由过渡动态效果（待补充）" class="heading" id="路由过渡动态效果（待补充）">路由过渡动态效果（待补充）</h1><div class="heading-children"><div><p>参考：</p></div><div><ul>
<li data-line="0"><a data-tooltip-position="top" aria-label="https://www.bilibili.com/video/BV1oL411P7JX?p=12&amp;vd_source=60cd820d66490f513305005717358b72" rel="noopener" class="external-link is-unresolved" href="https://www.bilibili.com/video/BV1oL411P7JX?p=12&amp;vd_source=60cd820d66490f513305005717358b72" target="_self">小满Router（第十章-路由过渡动效）_哔哩哔哩_bilibili</a></li>
<li data-line="1"><a data-tooltip-position="top" aria-label="https://www.bilibili.com/video/BV1dS4y1y7vd?p=23&amp;vd_source=60cd820d66490f513305005717358b72" rel="noopener" class="external-link is-unresolved" href="https://www.bilibili.com/video/BV1dS4y1y7vd?p=23&amp;vd_source=60cd820d66490f513305005717358b72" target="_self">小满Vue3（第二十一章 transition组件基础用法）_哔哩哔哩_bilibili</a></li>
</ul></div><div><p>其实就是在两个路由页面切换的时候加上一些动画效果，对应的在Router-view标签中使用一个叫做transition的标签</p></div><div><p>至于具体的过渡动画效果可以安装和引入使用一些第三方的库来完成</p></div><div><p><a data-tooltip-position="top" aria-label="https://animate.style/" rel="noopener" class="external-link is-unresolved" href="https://animate.style/" target="_self">Animate.css | A cross-browser library of CSS animations.</a></p></div></div></div><div class="heading-wrapper"><h1 data-heading="路由的滚动行为（待补充）" class="heading" id="路由的滚动行为（待补充）">路由的滚动行为（待补充）</h1><div class="heading-children"><div><p>参考：<a rel="noopener" class="external-link is-unresolved" href="https://www.bilibili.com/video/BV1oL411P7JX?p=13" target="_self">https://www.bilibili.com/video/BV1oL411P7JX?p=13</a></p></div><div><p>使用前端路由，当切换到新路由时，想要页面滚到顶部，或者是保持原先的滚动位置，<br>
就像重新加载页面那样。vue-router 可以自定义路由切换时页面如何滚动。<br>
当创建一个Router 实例，你可以提供一个 scro11Behavior 方法来实现，支持异步</p></div></div></div><div class="heading-wrapper"><h1 data-heading="嵌套路由" class="heading" id="嵌套路由">嵌套路由</h1><div class="heading-children"><div><p>如果希望再嵌套更深层次的路由跳转，例如：希望在 A53 组件内再进行路由跳转</p></div><div><p><img alt="image-20220926150819624" src="https://article.biliimg.com/bfs/article/4a24db7e2930ca4f4fab80b4dfdc5beaeb2b7f36.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p>首先，修改 A53.vue</p></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"a53"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>其次，再修改 /src/router/a5router.ts 文件 内容</p></div><div><pre class="language-typescript" tabindex="0"><code class="language-typescript is-loaded"><span class="token keyword">import</span> <span class="token punctuation">{</span>createRouter<span class="token punctuation">,</span> createWebHashHistory<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token constant">A51</span> <span class="token keyword">from</span> <span class="token string">'../views/A51.vue'</span>
<span class="token keyword">import</span> <span class="token constant">A52</span> <span class="token keyword">from</span> <span class="token string">'../views/A52.vue'</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// ...</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/a3'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A53.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'student'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A531.vue'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'teacher'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A532.vue'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token comment">// ...</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>将来访问 /a3/student 时，效果为</p></div><div><p><img alt="image-20220926151216217" src="https://article.biliimg.com/bfs/article/e32aa88ac28ca2a5a581e34c11626a9d3bf5f9ff.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p>访问 /a3/teacher 时，效果为</p></div><div><p><img alt="image-20220926151249403" src="https://article.biliimg.com/bfs/article/e42a72cf89aa1ad4232a44f9450293deeefe5dc0.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div></div></div><div class="heading-wrapper"><h1 data-heading="重定向" class="heading" id="重定向">重定向</h1><div class="heading-children"><div><p>用法1</p></div><div><pre class="language-typescript" tabindex="0"><code class="language-typescript is-loaded"><span class="token keyword">import</span> <span class="token punctuation">{</span>createRouter<span class="token punctuation">,</span> createWebHashHistory<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token constant">A51</span> <span class="token keyword">from</span> <span class="token string">'../views/A51.vue'</span>
<span class="token keyword">import</span> <span class="token constant">A52</span> <span class="token keyword">from</span> <span class="token string">'../views/A52.vue'</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// ...</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/a3'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A53.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">'/a3/student'</span><span class="token punctuation">,</span> <span class="token comment">// 重定向到另外路径</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'student'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A531.vue'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'teacher'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A532.vue'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token comment">// ...</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>效果是，页面输入 /a3，紧接着会重定向跳转到 /a3/student</p></div><div><p>用法2</p></div><div><pre class="language-typescript" tabindex="0"><code class="language-typescript is-loaded"><span class="token keyword">import</span> <span class="token punctuation">{</span>createRouter<span class="token punctuation">,</span> createWebHashHistory<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token constant">A51</span> <span class="token keyword">from</span> <span class="token string">'../views/A51.vue'</span>
<span class="token keyword">import</span> <span class="token constant">A52</span> <span class="token keyword">from</span> <span class="token string">'../views/A52.vue'</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/a1'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> <span class="token constant">A51</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/a2'</span><span class="token punctuation">,</span> 
    component<span class="token operator">:</span> <span class="token constant">A52</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/:pathMatcher(.*)*'</span><span class="token punctuation">,</span> <span class="token comment">// 可以匹配剩余的路径</span>
    redirect<span class="token operator">:</span> <span class="token string">'/a2'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token comment">// ...</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>效果是，当页面输入一个不存在路径 /aaa 时，会被 <code>path: '/:pathMatcher(.*)*'</code> 匹配到，然后重定向跳转到 A52 组件去</p></div></div></div><div class="heading-wrapper"><h1 data-heading="动态路由与菜单" class="heading" id="动态路由与菜单">动态路由与菜单</h1><div class="heading-children"><div><p>动态路由的意思就是路由文件不是一成不变的，举个例子就是说不同的用户可以看到一样的界面的内容就是静态路由，不同权限用户对应不同的路由就是要使用动态路由，应该存储在数据库访问后端获取之后拼接到静态路由取得完整的路由，同时为了保证页面刷新动态路由不丢失可以使用vueuse库的useStorage存储会话信息</p></div><div><p>动态菜单就是根据动态路由返回的路由和菜单信息动态生成菜单项而已，同样的也需要使用useStorage存储会话信息</p></div><div class="heading-wrapper"><h2 data-heading="路由文件" class="heading" id="路由文件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>路由文件</h2><div class="heading-children"><div><p>a6router.js</p></div><div><pre class="language-typescript" tabindex="0"><code class="language-typescript is-loaded"><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStorage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueuse/core'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Route<span class="token punctuation">,</span> Menu <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../model/Model8080'</span>
<span class="token keyword">const</span> clientRoutes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A6Login.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/404'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'404'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A6NotFound.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'main'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../views/A6Main.vue'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/:pathMatcher(.*)*'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'remaining'</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">'/404'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> clientRoutes
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> serverMenus <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useStorage</span><span class="token generic class-name"><span class="token operator">&lt;</span>Menu<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'serverMenus'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> serverRoutes <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useStorage</span><span class="token generic class-name"><span class="token operator">&lt;</span>Route<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'serverRoutes'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">addServerRoutes</span><span class="token punctuation">(</span>serverRoutes<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">addServerRoutes</span><span class="token punctuation">(</span>routeList<span class="token operator">:</span> Route<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> r <span class="token keyword">of</span> routeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>parentName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>parentName<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        path<span class="token operator">:</span> r<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>component<span class="token punctuation">)</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> r<span class="token punctuation">.</span>name
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  serverRoutes<span class="token punctuation">.</span>value <span class="token operator">=</span> routeList
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">resetRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> r <span class="token keyword">of</span> clientRoutes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  serverRoutes<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
  serverMenus<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router
</code><button class="copy-code-button">复制</button></pre></div><div><p>本文件重要的函数及变量</p></div><div><ul>
<li data-line="0"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>addServerRoutes 函数向路由表中添加由服务器提供的路由，路由分成两部分
<ul>
<li data-line="1">clientRoutes 这是客户端固定的路由</li>
<li data-line="2">serverRoutes 这是服务器变化的路由，存储于 localStorage</li>
</ul>
</li>
<li data-line="3"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>resetRoutes 函数用来将路由重置为 clientRoutes 
<ul>
<li data-line="4">vue-router@4 中的 addRoute 方法会【覆盖】同名路由，这是这种实现的关键</li>
<li data-line="5">因此，服务器返回的路由最好是 main 的子路由，这样重置时就会比较简单，用之前的 main 一覆盖就完事了</li>
</ul>
</li>
<li data-line="6">serverMenus 变量记录服务器变化的菜单，存储于 localStorage</li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="登录组件" class="heading" id="登录组件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>登录组件</h2><div class="heading-children"><div><p>动态路由应当在登录时生成，A6Login.vue</p></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>form <span class="token operator">:</span>label<span class="token operator">-</span>col<span class="token operator">=</span><span class="token string">"{ span: 6 }"</span> autocomplete<span class="token operator">=</span><span class="token string">"off"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"用户名"</span> v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">"validateInfos.username"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>input v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"dto.username"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item label<span class="token operator">=</span><span class="token string">"密码"</span> v<span class="token operator">-</span>bind<span class="token operator">=</span><span class="token string">"validateInfos.password"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>input<span class="token operator">-</span>password v<span class="token operator">-</span>model<span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">"dto.password"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>wrapper<span class="token operator">-</span>col<span class="token operator">=</span><span class="token string">"{ offset: 6, span: 16 }"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"onClick"</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Submit</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>      
    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>form<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> ref<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Form</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'ant-design-vue'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useRouter <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword module">import</span> <span class="token imports">axios</span> <span class="token keyword module">from</span> <span class="token string">'../api/request'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useRequest <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'vue-request'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">AxiosRespToken</span><span class="token punctuation">,</span> <span class="token maybe-class-name">LoginDto</span><span class="token punctuation">,</span> <span class="token maybe-class-name">AxiosRespMenuAndRoute</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'../model/Model8080'</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> resetRoutes<span class="token punctuation">,</span> addServerRoutes<span class="token punctuation">,</span> serverMenus <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'../router/a6router'</span>
<span class="token keyword">const</span> dto <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">username</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> rules <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">'用户名必填'</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">'密码必填'</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> validateInfos<span class="token punctuation">,</span> validate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token maybe-class-name">Form</span><span class="token punctuation">.</span><span class="token method function property-access">useForm</span><span class="token punctuation">(</span>dto<span class="token punctuation">,</span> rules<span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">runAsync</span><span class="token operator">:</span>login <span class="token punctuation">}</span> <span class="token operator">=</span> useRequest<span class="token operator">&lt;</span><span class="token maybe-class-name">AxiosRespToken</span><span class="token punctuation">,</span> <span class="token maybe-class-name">LoginDto</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">dto</span><span class="token punctuation">)</span><span class="token arrow operator">=&gt;</span> axios<span class="token punctuation">.</span><span class="token method function property-access">post</span><span class="token punctuation">(</span><span class="token string">'/api/loginJwt'</span><span class="token punctuation">,</span> dto<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">manual</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">runAsync</span><span class="token operator">:</span>menu <span class="token punctuation">}</span> <span class="token operator">=</span> useRequest<span class="token operator">&lt;</span><span class="token maybe-class-name">AxiosRespMenuAndRoute</span><span class="token punctuation">,</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">username</span><span class="token punctuation">)</span><span class="token arrow operator">=&gt;</span> axios<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/menu/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">manual</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">try</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">await</span> <span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> loginResp <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">login</span><span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token property-access">value</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>loginResp<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">code</span> <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 登录成功</span>
      <span class="token keyword">const</span> token <span class="token operator">=</span> loginResp<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">token</span>
      <span class="token keyword">const</span> menuResp <span class="token operator">=</span> <span class="token keyword control-flow">await</span> <span class="token function">menu</span><span class="token punctuation">(</span>dto<span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">.</span><span class="token property-access">username</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> routeList <span class="token operator">=</span> menuResp<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">routeList</span>
      <span class="token function">addServerRoutes</span><span class="token punctuation">(</span>routeList<span class="token punctuation">)</span>
      serverMenus<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> menuResp<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">.</span><span class="token property-access">menuTree</span>
      router<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token arrow operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token function">resetRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span><span class="token property-access">login</span><span class="token punctuation">{</span>
  <span class="token literal-property property">margin</span><span class="token operator">:</span> 200px auto<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">25</span><span class="token operator">%</span><span class="token punctuation">;</span>
  <span class="token literal-property property">padding</span><span class="token operator">:</span> 20px<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 180px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> antiquewhite<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code><button class="copy-code-button">复制</button></pre></div><div><ul>
<li data-line="0">登录成功后去请求 <code>/api/menu/{username}</code>  获取该用户的菜单和路由</li>
<li data-line="1">router.push 方法用来以编程方式跳转至主页路由</li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="主页组件" class="heading" id="主页组件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>主页组件</h2><div class="heading-children"><div><p>A6Main.vue</p></div><div><pre class="language-js" tabindex="0"><code class="language-js is-loaded"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"a6main"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>sider<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>a<span class="token operator">-</span>menu mode<span class="token operator">=</span><span class="token string">"inline"</span> theme<span class="token operator">=</span><span class="token string">"dark"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>template v<span class="token operator">-</span><span class="token keyword control-flow">for</span><span class="token operator">=</span><span class="token string">"m1 of serverMenus"</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a<span class="token operator">-</span>sub<span class="token operator">-</span>menu v<span class="token operator">-</span><span class="token keyword control-flow">if</span><span class="token operator">=</span><span class="token string">"m1.children"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"m1.id"</span> <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">"m1.title"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>template #icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>a<span class="token operator">-</span>icon <span class="token operator">:</span>icon<span class="token operator">=</span><span class="token string">"m1.icon"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item v<span class="token operator">-</span><span class="token keyword control-flow">for</span><span class="token operator">=</span><span class="token string">"m2 of m1.children"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"m2.id"</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>template #icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>a<span class="token operator">-</span>icon <span class="token operator">:</span>icon<span class="token operator">=</span><span class="token string">"m2.icon"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>router<span class="token operator">-</span>link v<span class="token operator">-</span><span class="token keyword control-flow">if</span><span class="token operator">=</span><span class="token string">"m2.routePath"</span> <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"m2.routePath"</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>m2<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>span v<span class="token operator">-</span><span class="token keyword control-flow">else</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>m2<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>sub<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item v<span class="token operator">-</span><span class="token keyword control-flow">else</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"m1.id"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>template #icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span>a<span class="token operator">-</span>icon <span class="token operator">:</span>icon<span class="token operator">=</span><span class="token string">"m1.icon"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>icon<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>router<span class="token operator">-</span>link v<span class="token operator">-</span><span class="token keyword control-flow">if</span><span class="token operator">=</span><span class="token string">"m1.routePath"</span> <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"m1.routePath"</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>m1<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span v<span class="token operator">-</span><span class="token keyword control-flow">else</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>m1<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>menu<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>            
          <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>menu<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>sider<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>content<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>layout<span class="token operator">-</span>content<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">AIcon</span></span> <span class="token keyword module">from</span> <span class="token string">'../components/AIcon3'</span> <span class="token comment">// jsx icon 组件</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> serverMenus <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'../router/a6router'</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span><span class="token property-access">a6main</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">220</span><span class="token punctuation">,</span> <span class="token number">225</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  box<span class="token operator">-</span>sizing<span class="token operator">:</span> border<span class="token operator">-</span>box<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span><span class="token property-access">ant</span><span class="token operator">-</span>layout<span class="token operator">-</span>header <span class="token punctuation">{</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span>darkseagreen<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token property-access">ant</span><span class="token operator">-</span>layout<span class="token operator">-</span>sider <span class="token punctuation">{</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span>lightsalmon<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token property-access">ant</span><span class="token operator">-</span>layout<span class="token operator">-</span>content <span class="token punctuation">{</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> aliceblue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token property-access">ant</span><span class="token operator">-</span>layout<span class="token operator">-</span>footer <span class="token punctuation">{</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span>darkslateblue<span class="token punctuation">;</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 30px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token property-access">ant</span><span class="token operator">-</span>layout <span class="token punctuation">{</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token property-access">ant</span><span class="token operator">-</span>layout<span class="token operator">-</span>has<span class="token operator">-</span>sider <span class="token punctuation">{</span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token operator">%</span> <span class="token operator">-</span> 50px<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code><button class="copy-code-button">复制</button></pre></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="token 使用" class="heading" id="token_使用">token 使用</h1><div class="heading-children"><div><ol>
<li data-line="0"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>获取用户信息，例如服务器端可以把用户名、该用户的路由、菜单信息都统一从 token 返回
<ul>
<li data-line="1">atob()函数，解码base64获取token前两部分存储公共信息的部分、Json.parse()解析成JSON对象</li>
</ul>
</li>
<li data-line="2"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>前端路由跳转依据，例如跳转前检查 token，如果不存在，表示未登录，就避免跳转至某些路由
<ul>
<li data-line="3">router.beforeeach(to,from)：在路由跳转前通过token进行校验</li>
<li data-line="4">router.aftereach(to,from)：跳转后修改页面标题（因为Vue3的所有组件其实只有一个index.html）</li>
<li data-line="5">都有两个相同的参数to：目标路由对象；from：来源路有对象</li>
</ul>
</li>
<li data-line="6"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>后端 api 访问依据，例如每次发请求携带 token，后端需要身份校验的 api 需要用到
<ul>
<li data-line="7">拦截器中获取token、判断、放行</li>
</ul>
</li>
</ol></div><div class="mod-footer"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="outline-tree tree-container"><div class="tree-item nav-folder mod-root" data-depth="0"><div class="tree-item-self nav-folder-title"><div class="tree-item-inner nav-folder-title-content">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item-children nav-folder-children"><div class="nav-folder-spacer"></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#导读" data-path="#导读"><div class="tree-item-inner heading-link" heading-name="导读">导读</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#安装" data-path="#安装"><div class="tree-item-inner heading-link" heading-name="安装">安装</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#创建_router" data-path="#创建_router"><div class="tree-item-inner heading-link" heading-name="创建 router">创建 router</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#动态导入【推荐】" data-path="#动态导入【推荐】"><div class="tree-item-inner heading-link" heading-name="动态导入【推荐】">动态导入【推荐】</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#编程式导航和路由传参（待补充）" data-path="#编程式导航和路由传参（待补充）"><div class="tree-item-inner heading-link" heading-name="编程式导航和路由传参（待补充）">编程式导航和路由传参（待补充）</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#路由元信息（待补充）" data-path="#路由元信息（待补充）"><div class="tree-item-inner heading-link" heading-name="路由元信息（待补充）">路由元信息（待补充）</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#路由过渡动态效果（待补充）" data-path="#路由过渡动态效果（待补充）"><div class="tree-item-inner heading-link" heading-name="路由过渡动态效果（待补充）">路由过渡动态效果（待补充）</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#路由的滚动行为（待补充）" data-path="#路由的滚动行为（待补充）"><div class="tree-item-inner heading-link" heading-name="路由的滚动行为（待补充）">路由的滚动行为（待补充）</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#嵌套路由" data-path="#嵌套路由"><div class="tree-item-inner heading-link" heading-name="嵌套路由">嵌套路由</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#重定向" data-path="#重定向"><div class="tree-item-inner heading-link" heading-name="重定向">重定向</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#动态路由与菜单" data-path="#动态路由与菜单"><div class="tree-item-inner heading-link" heading-name="动态路由与菜单">动态路由与菜单</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#路由文件" data-path="#路由文件"><div class="tree-item-inner heading-link" heading-name="路由文件">路由文件</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#登录组件" data-path="#登录组件"><div class="tree-item-inner heading-link" heading-name="登录组件">登录组件</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#主页组件" data-path="#主页组件"><div class="tree-item-inner heading-link" heading-name="主页组件">主页组件</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/前端/vue/vue3路由vue-router@4可导路可鉴权.html#token_使用" data-path="#token_使用"><div class="tree-item-inner heading-link" heading-name="token 使用">token 使用</div></a><div class="tree-item-children"></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>