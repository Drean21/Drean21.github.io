<!DOCTYPE html>
<html><head>
<title>打造舒适开发环境</title>
<base href="../..">
<meta id="root-path" root-path="../..">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
<meta charset="UTF-8">
<meta name="description" content="尘影迹痕 - 打造舒适开发环境">
<meta property="og:title" content="打造舒适开发环境">
<meta property="og:description" content="尘影迹痕 - 打造舒适开发环境">
<meta property="og:type" content="website">
<meta property="og:url" content="https://blog.cytl2.eu.org/技术/开发利器/打造舒适开发环境.html">
<meta property="og:image" content="https://article.biliimg.com/bfs/article/6867e241acc0193f9642f422f021a80c1412be32.png">
<meta property="og:site_name" content="尘影迹痕">
<meta name="author" content="lzy"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://blog.cytl2.eu.org/lib/rss.xml"></head><body class="publish css-settings-manager theme-light show-inline-title h2-underline tbMH-yuan tbMH-qk tbMH-ds-cg tbMH-kd-ncc-jy is-focused"><include src="lib/html/custom-head-content.html"></include><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.svg"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript><link rel="preload" href="lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/snippets.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6):has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(const t of e){let e=t.getAttribute("src");try{const o=await fetch(e);if(!o.ok){console.log("Could not include file: "+e),t?.remove();continue}let l=await o.text(),n=document.createRange().createContextualFragment(l),c=Array.from(n.children);for(let e of c)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);t.before(n),t.remove(),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="前言"><p>前言</p></h1><div class="heading-wrapper"><div class="heading-children"><div><p>很早以前，从开始学习编程的时候win系统上安装各种软件，配置各种环境变量，安装各大IDE，到之后学习了容器快速部署。到接触Linux系统，学会在VM等虚拟机上装Linux系统，学习Linux命令、git命令等各种相关语言。到本地开发编写代码完毕ssh连接上传Linux，Linux系统下部署上线。再到ssh连接Linux主机，win主机编程同步上传Linux系统，再到ssh连接主机完全交由云上Linux主机存储共享代码共同编辑和在Linux云服务器直接运行调试，。。。</p></div><div><p>以上是新手小白到逐渐深入的全过程。而以前还用VMvare、VBox等虚拟机，现在伴随着wsl的出现，以及旧笔记本报废，我突然想把开发环境直接迁移到wsl这种新奇的方式。</p></div></div></div><div class="heading-wrapper"><h1 data-heading="WSL基础知识和命令" class="heading" id="WSL基础知识和命令">WSL基础知识和命令</h1><div class="heading-children"><div><p>WSL，win的窗口化执行Linux环境的能力。经历了WSL1=&gt;WSL2的演变，WSL2有了真正的Linux环境（本质上也成为了虚拟机）。</p></div><div><p>安装WSL和更新WSL版本切换WSL版本可以参见官方文档</p></div><div><p>主要是如何修改Linux子系统安装的位置</p></div><div><ul>
<li data-line="0">安装时就确定位置的法子：<a data-tooltip-position="top" aria-label="https://zhuanlan.zhihu.com/p/263089007" rel="noopener" class="external-link is-unresolved" href="https://zhuanlan.zhihu.com/p/263089007" target="_self">自定义WSL的安装位置，别再装到C盘啦 - 知乎 (zhihu.com)</a></li>
<li data-line="1">备份、迁移：<a data-tooltip-position="top" aria-label="https://zhuanlan.zhihu.com/p/621873601" rel="noopener" class="external-link is-unresolved" href="https://zhuanlan.zhihu.com/p/621873601" target="_self">如何将WSL从C盘迁移到其他盘区 - 知乎 (zhihu.com)</a></li>
<li data-line="2">比较：<a data-tooltip-position="top" aria-label="https://zhuanlan.zhihu.com/p/646614611" rel="noopener" class="external-link is-unresolved" href="https://zhuanlan.zhihu.com/p/646614611" target="_self">Linux虚拟运行环境：WSL、VMware对比及维护 - 知乎 (zhihu.com)</a></li>
<li data-line="3">优雅的WSL技巧：<a data-tooltip-position="top" aria-label="https://www.bilibili.com/video/BV1Ku4y1f7nq/?spm_id_from=333.337.search-card.all.click&amp;vd_source=60cd820d66490f513305005717358b72" rel="noopener" class="external-link is-unresolved" href="https://www.bilibili.com/video/BV1Ku4y1f7nq/?spm_id_from=333.337.search-card.all.click&amp;vd_source=60cd820d66490f513305005717358b72" target="_self">如何优雅的使用WSL_哔哩哔哩_bilibili</a></li>
<li data-line="4">WSL配置深度学习环境：<a data-tooltip-position="top" aria-label="https://www.bilibili.com/video/BV1ok4y1t7XC/?spm_id_from=333.337.search-card.all.click&amp;vd_source=60cd820d66490f513305005717358b72" rel="noopener" class="external-link is-unresolved" href="https://www.bilibili.com/video/BV1ok4y1t7XC/?spm_id_from=333.337.search-card.all.click&amp;vd_source=60cd820d66490f513305005717358b72" target="_self">wsl2安装 深度学习环境配置！同时拥有ubuntu的高效和windows的便捷！_哔哩哔哩_bilibili</a></li>
</ul></div><div><p>WSL命令，更多见：<a data-tooltip-position="top" aria-label="https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands" rel="noopener" class="external-link is-unresolved" href="https://learn.microsoft.com/zh-cn/windows/wsl/basic-commands" target="_self">WSL 的基本命令 | Microsoft Learn</a></p></div><div><pre class="language-text" tabindex="0"><code class="language-text is-loaded">wsl -l -v 列出wsl映像信息
输入 wsl --shutdown 使其停止运行，再次使用wsl -l -v确保其处于stopped状态。
wsl --export Ubuntu-22.04 D:\WSL\Ubuntu_WSL\Ubuntu.tar导出备份
wsl --unregister Ubuntu-20.04 注销原有的wsl
wsl --import Ubuntu-22.04 D:\WSL\Ubuntu_WSL D:\WSL\Ubuntu_WSL\Ubuntu.tar导入备份
wsl -d Ubuntu
这会启动名为"Ubuntu"的WSL发行版。
用户会变为root，通过Ubuntu2204 config --default-user cy
设置用户（这样做的前提是没有卸载原来的Ubuntu启动器和注册表）
还可以设置默认 Linux 发行版
wsl --set-default &lt;Distribution Name&gt;
</code><button class="copy-code-button">复制</button></pre></div><div><p><strong>不小心没有注销成功，影像vhd文件还在只能用，如何删除？</strong></p></div><div><p>先确保停止运行，之后注销，之后磁盘管理找到它并右键分离</p></div><div><p><img alt="image-20230804110501012" src="https://article.biliimg.com/bfs/article/6867e241acc0193f9642f422f021a80c1412be32.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p>之后就能删除导出的了vhd映射文件了。</p></div></div></div><div class="heading-wrapper"><h1 data-heading="WSL配置深度学习环境" class="heading" id="WSL配置深度学习环境">WSL配置深度学习环境</h1><div class="heading-children"><div><div data-callout-metadata="" data-callout-fold="" data-callout="tip" class="callout"><div class="callout-title"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path></svg></div><div class="callout-title-inner">碎念念</div></div><div class="callout-content">
<p>对于我这种非深度学习专业人士、不需要编译和特殊要求的人来说驱动感觉是配不配都一样，。新买的笔记本都还没配置竟然有人找我跑python代码就离谱，。</p>
</div></div></div><div class="heading-wrapper"><h2 data-heading="conda安装" class="heading" id="conda安装"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>conda安装</h2><div class="heading-children"><div><p><strong>具体步骤：</strong></p></div><div><ul>
<li data-line="0">
<p>安装Anaconda包管理工具，直接从官网找到Linux版本的下载链接复制，在wsl的Linux系统下通过wget命令下载，例如：</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">wget</span> https://repo.anaconda.com/archive/Anaconda3-2023.03-Linux-x86_64.sh
</code><button class="copy-code-button">复制</button></pre>
<p>然后使用sh命令执行文件</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">sh</span> Anaconda3-2023.03-Linux-x86_64.sh
</code><button class="copy-code-button">复制</button></pre>
<p>接下来就是安装过程，只需要根据提示按回车或者输入yes即可。</p>
<p><strong>但是我需要自定义安装路径</strong>，我希望把软件都安装到<code>/opt</code>目录统一管理，所以在安装的过程中遇见询问安装路径时不要直接ENTER回车而是填写具体的路径，比如：<code>/opt/anaconda3</code>，要注意权限问题，如果没有权限实现修改文件权限所属，或者使用sudo在执行</p>
<p>以下是以sudo命令运行conda安装脚本的示例：<br>
<code>sudo bash Anaconda3-2023.07-2-Linux-x86_64.sh -b -p /opt/anaconda3</code><br>
上述命令中，Anaconda3-2023.07-2-Linux-x86_64.sh是你下载的conda安装脚本文件的名称，-b 参数表示安装过程不会询问任何问题，-p /opt/miniconda 参数指定了安装路径为/opt/miniconda。</p>
</li>
<li data-line="20"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p>修改环境变量配置（自定义安装路径后需要）</p>
<ul>
<li data-line="22">用户级别：打开 <code>~/.bashrc</code> 文件，并修改其中的 Conda 环境变量。将旧的安装路径 <code>/home/cy/anaconda3</code> 修改为新的路径 <code>/home/new_path/anaconda3</code>。保存文件后执行以下命令使更改生效：<code>source ~/.bashrc</code></li>
<li data-line="23">系统级别：则编辑<code>/etc/profile</code>文件</li>
<li data-line="24">用户级别会覆盖系统级别的配置</li>
<li data-line="25">修改完后使用<code>source ~/.bashrc  # 或对应的配置文件</code>让配置文件生效</li>
<li data-line="26">验证：<code>conda info --envs</code>，命令是否正常</li>
</ul>
</li>
<li data-line="28">
<p>通过conda创建和激活环境</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda create --name cy310 <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.10</span>
conda activate cy310
<span class="token comment"># 还可以指定虚拟环境的安装路径，比如</span>
conda create --prefix /home/sj/envs/myenv <span class="token assign-left variable">python</span><span class="token operator">=</span><span class="token number">3.8</span>
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="37">
<p>添加镜像源，提速下载（可以添加多条镜像源，下载按顺序访问）</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda config --set show_channel_urls yes：这个命令用于设置 conda 显示 channel 的 URL。通过设置为 <span class="token string">"yes"</span>，你可以在 conda 命令执行时看到正在使用的 channel URL。
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config --add channels https://mirrors.aliyun.com/anaconda/pkgs/free/
conda config --add channels https://mirrors.aliyun.com/anaconda/pkgs/main/
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="47">
<p>在需要的环境下安装各种深度学习库（不指定版本号默认获取可用的最新版本）</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda <span class="token function">install</span> -c conda-forge librosa
conda <span class="token function">install</span> -c conda-forge matplotlib
conda <span class="token function">install</span> -c conda-forge numpy
</code><button class="copy-code-button">复制</button></pre>
<p><strong>如果配置了多个镜像源或者需要安装特定版本，建议指定安装库的版本号避免冲突和避免代码不兼容问题</strong></p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda <span class="token function">install</span> -c conda-forge <span class="token assign-left variable">librosa</span><span class="token operator">=</span><span class="token number">0.8</span>.1
conda <span class="token function">install</span> -c conda-forge <span class="token assign-left variable">matplotlib</span><span class="token operator">=</span><span class="token number">3.4</span>.3
conda <span class="token function">install</span> -c conda-forge <span class="token assign-left variable">numpy</span><span class="token operator">=</span><span class="token number">1.21</span>.2
</code><button class="copy-code-button">复制</button></pre>
<p>检查是否安装成功</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda安装的话可以使用conda list命令罗列安装的库，后面加上具体的库名则只罗列具体的库，当然还可以使用查找匹配命令筛选
在Linux/Unix/MacOS中：conda list <span class="token operator">|</span> <span class="token function">grep</span> numpy
在Windows中：conda list <span class="token operator">|</span> findstr numpy
</code><button class="copy-code-button">复制</button></pre>
</li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="conda配置" class="heading" id="conda配置"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>conda配置</h2><div class="heading-children"><div><p>前面我自定义了安装路径，那其他环境配置我也想动一下，比如虚拟环境路径配置。</p></div><div><ul>
<li data-line="0">
<p>查看配置：默认是家目录下用户目录，如<code>/home/cy/.conda/envs</code></p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda config --show envs_dirs
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="6">
<p>添加自定义路径（也可以通过文件编辑修改<code>.condarc</code>文件）</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda config --add envs_dirs /opt/anaconda3/envs
可以通过conda config --remove envs_dirs dir，移除指定环境路径
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="13">
<p>如果 <code>/opt/anaconda3/envs</code> 的路径在列表中靠前，那么它的优先级已经比较高。如果不是，您可以通过运行以下命令将 <code>/opt/anaconda3/envs</code> 移到列表的前面，从而提高优先级（之后创建环境的时候默认就会创建到优先级最高的环境目录）：</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda config --prepend envs_dirs /opt/anaconda3/envs
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="19">
<p>检查配置是否已经更改，运行以下命令查看环境路径配置：</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda config --show envs_dirs
</code><button class="copy-code-button">复制</button></pre>
<p>现在，当您使用 conda 创建虚拟环境时，系统会优先在 <code>/opt/anaconda3/envs</code> 路径下查找并创建环境，这可以满足您希望的优先级顺序。</p>
</li>
</ul></div><div><p>其实就是把这些路径标识起来让conda能够识别并从中扫描虚拟环境。也就是说我们可以直接创建环境，然后手动移动环境目录到环境配置中的其他目录，conda依旧能够识别。</p></div><div><hr></div><div><p>还可以<strong>设置默认的虚拟环境</strong>（conda本身不支持），利用配置文件在启动的时候启动</p></div><div><p>为了方便，直接在<code>etc/profile</code>文件末尾追加，以便无论是root用户还是其他普通用户都能生效。</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token assign-left variable">CONDA_PATH</span><span class="token operator">=</span><span class="token string">"/opt/anaconda3/bin"</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"<span class="token variable">$CONDA_PATH</span>:<span class="token environment constant">$PATH</span>"</span>
<span class="token builtin class-name">source</span> <span class="token variable">$CONDA_PATH</span>/activate cy310
</code><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="conda备份和卸载" class="heading" id="conda备份和卸载"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>conda备份和卸载</h2><div class="heading-children"><div><blockquote>
<p>简单一提：Linux上一切皆文件，但是如果觉着直接把安装文件夹迁移到某一个目录就可以的话那会哭的</p>
</blockquote></div><div><p>1、导出环境配置以作备份<br>
<code>conda env export --name cy310 &gt; environment.yaml</code></p></div><div><p>2、Linux 上删除 Anaconda 或 Miniconda 的步骤：</p></div><div><p>卸载旧的 Conda，参考：<a data-tooltip-position="top" aria-label="https://blog.csdn.net/m0_37577608/article/details/123013875" rel="noopener" class="external-link is-unresolved" href="https://blog.csdn.net/m0_37577608/article/details/123013875" target="_self">Linux上删除Anaconda或Miniconda的步骤<em>linux删除anaconda3</em>微波炉.的博客-CSDN博客</a></p></div><div><ul>
<li data-line="0">
<p>删除整个 Anaconda 或 Miniconda 的安装文件夹：<br>
<code>rm -rfv ~/anaconda3</code></p>
</li>
<li data-line="3">
<p>可选）编辑 ~/.bashrc（如果主目录下没有 .bashrc 这个文件就编辑文件 .bash_profile），删除和 Anaconda 和 Miniconda 相关的部分；</p>
</li>
<li data-line="5">
<p>（可选）在用户主目录删除下列隐藏文件和文件夹：</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">.condarc 文件
.conda/ 目录
.continuum/ 目录
<span class="token function">rm</span> -rfv ~/.condarc ~/.conda ~/.continuum
</code><button class="copy-code-button">复制</button></pre>
</li>
</ul></div><div><p>3、重新安装</p></div><div><p>4、恢复 Conda 环境：使用以下命令创建并恢复环境（注意可能会恢复到备份前原来的目录，如果发生改变，直接mv即可）</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">conda <span class="token function">env</span> create --name cy310 --file environment.yaml
</code><button class="copy-code-button">复制</button></pre></div><div><p>如果环境下包配置很多，可能会陷入漫长等待，。</p></div></div></div><div class="heading-wrapper"><h2 data-heading="conda常用命令" class="heading" id="conda常用命令"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>conda常用命令</h2><div class="heading-children"><div><ul>
<li data-line="0">
<p>创建环境：<code>conda create -n test python=3.6</code></p>
</li>
<li data-line="2">
<p>激活环境：<code>conda activate base</code></p>
</li>
<li data-line="4">
<p>移除环境：<code>conda remove --name test --all</code></p>
</li>
<li data-line="5">
<p>查看已有环境：<code>conda env list</code></p>
</li>
<li data-line="6"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p>查看配置：</p>
<ul>
<li data-line="7"><code>conda config --show </code></li>
<li data-line="8"><code>conda config --show envs_dirs</code></li>
</ul>
</li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="wsl连接开发" class="heading" id="wsl连接开发"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>wsl连接开发</h2><div class="heading-children"><div><p><strong>wsl上的环境基本配置好了，那么如何在win上的IDE连接和使用wsl中Linux子系统配置好的环境呢？</strong></p></div><div><p>现在新版本的IDE基本上都有wsl连接的便捷服务了。</p></div><div><p><img alt="image-20230817214057809" src="https://article.biliimg.com/bfs/article/01aa354e2af37422ec7ee623502df7d6f1d9f9d3.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p>其实我觉着python直接用vscode就够了，不过专业点的话用Pycharm，不过得专业版才有wsl便捷链接，思路也是一样的</p></div><div><p><img alt="image-20230817214632194" src="https://article.biliimg.com/bfs/article/60c5119210be4bddb71ade06f7ee70f1dcbdbd5a.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p>如此一来就能直接在“远程”的Linux系统下同步创建、编辑和运行代码了，事实上远程ssh连接云上Linux服务器的线上开发也不就是这样吗啊哈哈。IDEA也是同理操作。</p></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="WSL开启ssh服务" class="heading" id="WSL开启ssh服务">WSL开启ssh服务</h1><div class="heading-children"><div><p>虽然可以直接在win的窗口命令行直接执行命令操作Linux子系统甚至可以在文件管理中直接可视化操作文件，甚至于很多新版IDE都可以直接使用wsl链接方式链接开发，。但是我们真正开发都是在云端的Linux服务器上调试和部署。故而开启wsl的ssh服务可以更接近真实开发体验，模拟通过ssh连接远程开发和部署。当然了甚至可以再设置开机自启动和远程共享网络将win系统电脑充当“Linux服务器”</p></div><div><p>参考文章：<a data-tooltip-position="top" aria-label="https://blog.csdn.net/jasneik/article/details/127993390" rel="noopener" class="external-link is-unresolved" href="https://blog.csdn.net/jasneik/article/details/127993390" target="_self">SSH连接WSL2踩坑记录与增加端口转换规则，实现外网与WSL2的连接_jasneik的博客-CSDN博客</a></p></div><div class="heading-wrapper"><h2 data-heading="WSL配置SSH服务" class="heading" id="WSL配置SSH服务"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>WSL配置SSH服务</h2><div class="heading-children"><div><p>1.1 重装<code>openssh-server</code></p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">sudo</span> <span class="token function">apt</span> remove openssh-server      <span class="token comment"># 如果已经安装了，建设先卸载 sudo apt-get remove openssh-server </span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openssh-server <span class="token comment"># new install</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>1.2 修改配置信息</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">sudo</span> <span class="token function">vim</span> /etc/ssh/sshd_config  <span class="token comment"># sshd_config is a readonly file</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>打开文件后，可以用搜索修改如下的信息</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">Port <span class="token number">2222</span>                   <span class="token comment"># 监听的端口，可以是其它的（默认是22，最好改成其他避免和win上可能有的ssh服务产生端口冲突）</span>
ListenAddress <span class="token number">0.0</span>.0.0       <span class="token comment"># 0.0.0.0 表示所有的地址</span>
PasswordAuthentication <span class="token function">yes</span>  <span class="token comment"># 把原来的no改成yes，意思是可以用密码登录</span>
PermitRootLogin <span class="token function">yes</span>         <span class="token comment"># 把原来的prohibit-password改成yes</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>把上面的都改完好，就重启ssh服务</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">ssh</span> restart
</code><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="SSH连接" class="heading" id="SSH连接"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>SSH连接</h2><div class="heading-children"><div><p>在WSL中安装和配置<code>openssh-server</code>后，本机可以直接通过localhost、自定义端口号以及用户名和密码直接通过远程ssh工具连接。</p></div><div><p>但是现在远程的PC，还是无法通过<code>ssh</code>访问<code>WSL</code>的。</p></div><div><p><strong>配置端口转发和设置防火墙规则</strong></p></div><div><p>打开<code>WSL</code></p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">ifconfig</span>  <span class="token comment"># 查看网络配置</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/eb20445af3984384b83febae49a602b3.png#pic_center" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p>如上图所示，这里WSL的网络配置情况。一般是<code>172</code>开头，这个就是WSL的IP地址，我们需要装windows的端口转发到WSL。打开<code>Power Shell</code> (用管理员)</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">netsh interface portproxy <span class="token function">add</span> v4tov4 <span class="token assign-left variable">listenaddress</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0 <span class="token assign-left variable">listenport</span><span class="token operator">=</span><span class="token number">2222</span> <span class="token assign-left variable">connectaddress</span><span class="token operator">=</span>IP <span class="token assign-left variable">connectport</span><span class="token operator">=</span><span class="token number">2222</span>  <span class="token comment"># IP为你的WSL的IP地址</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>完成上面后，还需要开户防火墙入站规则</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">netsh advfirewall firewall <span class="token function">add</span> rule <span class="token assign-left variable">name</span><span class="token operator">=</span>WSL2 <span class="token assign-left variable">dir</span><span class="token operator">=</span>in <span class="token assign-left variable">action</span><span class="token operator">=</span>allow <span class="token assign-left variable">protocol</span><span class="token operator">=</span>TCP <span class="token assign-left variable">localport</span><span class="token operator">=</span><span class="token number">2222</span>
</code><button class="copy-code-button">复制</button></pre></div><div><p>也可以在 <strong>控制面板 --&gt; Windows Defender 防火墙 --&gt; 高级设置 --&gt; 入站规则中设置</strong></p></div><div><p><img alt="image-20230830165203044" src="https://article.biliimg.com/bfs/article/3edec59db2cf495a888fdd28ebc52ac50cc58343.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p>如上设置完后，应该可以远程通常本机的IP地址访问WSL了。</p></div><div><p><strong>注：这里的IP地址不是WSL的IP，是本机的IP，可以在<code>Power Shell</code>下用<code>ipconfig</code>查看</strong></p></div><div><p><u>可能出现的错误：<code>ssh</code>的时候，可以用<code>-v debug</code>一下，看看是什么问题</u></p></div><div><p>如下问题：</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">ssh_exchange_identification: read: Connection reset by peer
</code><button class="copy-code-button">复制</button></pre></div><div><p>这个问题可能是在修改<code>sshd_config</code>里配置项<code>Port（端口号）</code>与我们映射的不一致。重新修改后，启动ssh服务后，再尝试连接即可。</p></div><div><p><u>另外我们可以通过类似方法再配置端口转发到WSL</u></p></div><div><p>如果要增加其它端口转发到<code>WSL</code>，可能 过过如下命令继续添加。注意是在<code>Power Shell</code>。</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded">netsh interface portproxy <span class="token function">add</span> v4tov4 <span class="token assign-left variable">listenaddress</span><span class="token operator">=</span>* <span class="token assign-left variable">listenport</span><span class="token operator">=</span><span class="token number">80</span> <span class="token assign-left variable">connectaddress</span><span class="token operator">=</span>IP <span class="token assign-left variable">connectport</span><span class="token operator">=</span><span class="token number">80</span>  <span class="token assign-left variable">protocol</span><span class="token operator">=</span>tcp  <span class="token comment"># IP为你的WSL的IP地址，增加监听80端口</span>
<span class="token comment"># 删除转换端口</span>
netsh interface portproxy delete v4tov4 <span class="token assign-left variable">listenport</span><span class="token operator">=</span><span class="token number">80</span> <span class="token assign-left variable">protocol</span><span class="token operator">=</span>tcp
<span class="token comment"># 查看转发规则</span>
netsh interface portproxy show v4tov4
</code><button class="copy-code-button">复制</button></pre></div><div><p><u>如下，还可以修改<code>WSL</code> ip地址</u></p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token comment"># 修改WSL ip地址</span>
netsh interface <span class="token function">ip</span> <span class="token function">add</span> address <span class="token string">"vEthernet (WSL)"</span> <span class="token number">172.24</span>.39.1 <span class="token number">255.255</span>.0.0
</code><button class="copy-code-button">复制</button></pre></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Linux开发习惯" class="heading" id="Linux开发习惯">Linux开发习惯</h1><div class="heading-children"><div><p>配置wsl，还开启SSH服务，最后都是为了尽可能还原和模拟远程Linux服务器下开发环境。</p></div><div class="heading-wrapper"><h2 data-heading="LInux目录含义" class="heading" id="LInux目录含义"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>LInux目录含义</h2><div class="heading-children"><div><p>Linux系统的目录结构通常按照特定的设计原则进行了空间划分，不同目录用于不同的用途。以下是常见的Linux目录及其用途的概述：</p></div><div><ol>
<li data-line="0">
<p><strong>/（根目录）：</strong> 根目录是整个文件系统的起始点，包含所有其他目录和文件。它通常不会占用太多空间，但存储了系统的核心文件。</p>
</li>
<li data-line="2">
<p><strong>/bin（二进制文件）：</strong> 存放系统启动和恢复时需要的二进制文件，例如Shell程序和基本的命令，如<code>ls</code>、<code>cp</code>等。</p>
</li>
<li data-line="4">
<p><strong>/boot（引导文件）：</strong> 包含Linux内核和引导管理器（通常是GRUB）所需的文件。这个目录存储了系统启动时所需的配置文件和内核镜像。</p>
</li>
<li data-line="6">
<p><strong>/dev（设备文件）：</strong> 包含设备文件，用于与硬件设备进行通信，例如硬盘、键盘、鼠标等。</p>
</li>
<li data-line="8">
<p><strong>/etc（配置文件）：</strong> 存放系统全局配置文件和各种应用程序的配置文件。这是系统管理员进行配置的重要目录。</p>
</li>
<li data-line="10">
<p><strong>/home（用户主目录）：</strong> 每个用户的主目录都位于这里，包括用户的个人文件和设置。</p>
</li>
<li data-line="12">
<p><strong>/lib和/lib64（共享库）：</strong> 存放系统和应用程序使用的共享库文件。/lib通常用于32位系统，而/lib64用于64位系统。</p>
</li>
<li data-line="14">
<p><strong>/media和/mnt（可移动设备和挂载点）：</strong> 这些目录用于挂载可移动设备（如USB驱动器）和其他文件系统。</p>
</li>
<li data-line="16">
<p><strong>/opt（可选软件包）：</strong> 通常包含第三方软件的安装目录，以便将它们与系统分开。</p>
</li>
<li data-line="18">
<p><strong>/proc和/sys（虚拟文件系统）：</strong> 这些目录提供了关于系统内核和运行时信息的虚拟文件。/proc包含有关进程和系统状态的信息，/sys用于与内核运行时参数进行交互。</p>
</li>
<li data-line="20">
<p><strong>/root（超级用户主目录）：</strong> 超级用户（root）的主目录。</p>
</li>
<li data-line="22">
<p><strong>/sbin（系统二进制文件）：</strong> 包含用于系统维护和管理的二进制文件，通常只有超级用户才能访问。</p>
</li>
<li data-line="24">
<p><strong>/srv（服务数据）：</strong> 存放一些系统服务的数据文件。</p>
</li>
<li data-line="26">
<p><strong>/tmp（临时文件）：</strong> 用于存放临时文件的目录，定期清理以释放磁盘空间。</p>
</li>
<li data-line="28">
<p><strong>/usr（用户二进制文件和资源）：</strong> 包含系统中大部分用户程序和资源文件，例如应用程序、库、文档等。</p>
</li>
<li data-line="30">
<p><strong>/var（可变数据）：</strong> 存放经常变化的数据，如日志文件、缓存、数据库等。</p>
</li>
</ol></div></div></div><div class="heading-wrapper"><h2 data-heading="我的习惯" class="heading" id="我的习惯"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>我的习惯</h2><div class="heading-children"><div><blockquote>
<p>虽然上面的是规范，但有时候遵守适当的规范同时还可以稍作改变以便开发所需</p>
</blockquote></div><div class="heading-wrapper"><h3 data-heading="docker配置统一管理" class="heading" id="docker配置统一管理"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>docker配置统一管理</h3><div class="heading-children"><div><p>如<code>/mydata</code>，是一种在Linux系统中组织容器数据的常见做法</p></div><div><p>可以在根目录下创建一个名为<code>/mydata</code>的目录，然后将Docker容器的挂载目录放置在其中，以便更好地组织容器数据并提高整个系统的可维护性。这可以避免在根目录下创建不必要的文件夹，同时确保数据与应用程序逻辑分开。</p></div><div><p>默认情况下，<code>/data</code>目录中的数据对于所有用户可能是不可访问的，因为Linux系统通常会对目录和文件设置适当的权限以确保安全性和隐私。要使<code>/data</code>目录中的数据对所有用户可访问，您需要设置适当的文件权限和用户组。</p></div><div><p>以下是一种方式来实现这一点：</p></div><div><ol>
<li data-line="0">
<p>创建<code>/mydata</code>目录（如果尚未创建）：</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">sudo</span> <span class="token function">mkdir</span> /mydata
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="6">
<p>更改<code>/data</code>目录的权限，使其对所有用户可读、可写和可执行：</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">777</span> /mydata
</code><button class="copy-code-button">复制</button></pre>
<p>这会使目录对所有用户开放，但请注意，这可能会引入安全风险，因为任何用户都可以访问和修改该目录中的文件。</p>
</li>
<li data-line="14">
<p>如果需要更精细的权限控制，您可以创建一个专用的用户组，并将<code>/data</code>目录的所有者更改为该用户组，然后为该用户组授予适当的权限。这将允许一组用户访问<code>/data</code>目录。</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">sudo</span> <span class="token function">groupadd</span> datausers
<span class="token function">sudo</span> <span class="token function">chown</span> :datausers /mydata
<span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">770</span> /mydata
</code><button class="copy-code-button">复制</button></pre>
<p>在这个示例中，我们创建了一个名为<code>datausers</code>的用户组，并将<code>/data</code>目录的所有者更改为该组。然后，设置了<code>770</code>权限，这表示目录的所有者和该组的用户都具有读取、写入和执行权限，其他用户没有权限。</p>
</li>
</ol></div><div><p>其实这更方便个人开发（其实home目录最方便）</p></div><div><p>从生产角度，应该放在opt或var目录下实现公共访问。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="项目代码存放" class="heading" id="项目代码存放"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>项目代码存放</h3><div class="heading-children"><div><p><strong>/home目录</strong>：</p></div><div><p>该目录是用户主目录，每个用户都有自己的主目录，可以在该目录下安装软件。这样做的好处是安装的软件只对当前用户可见，不会影响其他用户，但是需要注意的是，如果安装的软件需要超级用户权限，则需要每次以超级用户身份运行安装命令。例如<code>/home/user/project</code>，可以用来<strong>放置自己开发的项目代码</strong>。</p></div><div><p>本地主机直接通过ssh连接远程LInux服务器的<code>/home/user/project</code>目录存放、编写代码，再把其他环境也装在LInux服务器上岂不美哉，。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="项目部署" class="heading" id="项目部署"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>项目部署</h3><div class="heading-children"><div><p>建议<code>/usr/local</code>，专门存放自己编写，运行的项目jar包、docker文件等，别忘了专门在该目录下新建一个文件夹来分门别类存放，例如：<code>/usr/local/project</code>、<code>/usr/localproject/docker</code>，防止杂乱无章。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="日志文件和配置文件" class="heading" id="日志文件和配置文件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>日志文件和配置文件</h3><div class="heading-children"><div><ol>
<li data-line="0">日志目录：考虑在服务器上为你的应用程序设置一个日志目录，用于存放应用程序的日志文件，例如 <code>/var/log/project</code>。这有助于方便查看和管理应用程序的日志信息。</li>
<li data-line="1">配置文件目录：将应用程序的配置文件单独存放在一个目录中，例如 <code>/etc/project</code>。这样可以集中管理和备份配置文件，方便应用程序的配置管理。</li>
</ol></div></div></div><div class="heading-wrapper"><h3 data-heading="脚本文件" class="heading" id="脚本文件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>脚本文件</h3><div class="heading-children"><div><p>脚本目录选择：一般来说，常见的做法是将脚本放在用户的主目录下或者一个专门用于存放脚本的目录中，具体选择取决于您的个人偏好和项目需求。</p></div><div><p>以下是一些常见的选择：</p></div><div><ol>
<li data-line="0">用户主目录：您可以将脚本放在当前登录用户的主目录下（通常为 <code>/home/用户名</code> 或 <code>/Users/用户名</code>），这样方便访问和管理。例如：<code>/home/user/start_containers.sh</code>。</li>
<li data-line="1">自定义目录：您也可以创建一个专门用于存放脚本的目录，例如 <code>/opt/scripts</code> 或 <code>/usr/local/bin</code> 等。这样做有助于组织和管理多个脚本文件。例如：<code>/opt/scripts/start_containers.sh</code>。</li>
</ol></div><div><p><u>我的建议：/usr/local/bin</u></p></div><div><p>确保将脚本文件设置为可执行权限，以便能够执行它。您可以使用以下命令为脚本添加执行权限：</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">chmod</span> +x /path/to/start_containers.sh
</code><button class="copy-code-button">复制</button></pre></div><div><p><strong>当脚本位于系统的可执行路径中（例如 <code>/usr/local/bin</code>），您可以在任何位置直接运行脚本，而无需指定完整的路径。</strong>否则，您需要在执行脚本时指定脚本的完整路径。</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="小结" class="heading" id="小结"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>小结</h2><div class="heading-children"><div><p><strong>最后：</strong>这个没什么统一的绝对的约定,完全看公司(管理员)自己的标准.毕竟大部分应用无论安装到哪里,只要配置对,就都可以跑起来.<br>
网上很多教程都是home一把梭的,<strong>我选择软件安装包用<code>/opt</code>统一管理</strong>，<strong>用yum源的安装的就<code>/usr/local</code>,按默认位置走</strong>.</p></div><div><p>只要管理和文档跟得上,软件安装到哪里完全不是问题。<strong>重要的是配置文件和数据。</strong></p></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="部署中间件" class="heading" id="部署中间件">部署中间件</h1><div class="heading-children"><div><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<p>这次在自己服务器，重新跑了一遍，回忆一下部署流程，。可改进的地方还有很多，比如：</p>
<ul>
<li data-line="2">既然使用了docker部署，那么容器内部应该尽可能使用内部网络通信，避免物理主机向外暴露过多端口，这样只需要开启80,443,22等基础端口即可</li>
<li data-line="3">应该编写一份docker-compose文件和一些辅助的dockerfile文件以及<code>.env</code>，方便以后在任何一台主机上一键部署，而不是现在每次都跑一遍<code>docker run</code>命令</li>
<li data-line="4">暂时没啥时间再重跑很多服务了，而且我LInux云服务器内存快爆了，以后有空再把剩下没写的以及微服务体系补上</li>
</ul>
</div></div></div><div class="heading-wrapper"><h2 data-heading="思考个问题" class="heading" id="思考个问题"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>思考个问题</h2><div class="heading-children"><div><p><strong>选择直接在物理机上部署？还是在docker容器部署呢？</strong></p></div><div><ul>
<li data-line="0">首先docker容器部署对于配置复杂尤其微服务之类来说，<u>docker部署足够方便、灵活、迅捷。</u>个人开发调试也足够所以我基本上选了他</li>
<li data-line="1"><u>另一点就是docker的隔离性</u>，可以方便解决jdk等依赖不同版本的应用启动问题。而且内部网络隔离，通过容器名内部访问，可以让外界物理机只向外开发22、80、443等端口，通过Nginx代理将请求在内部访问，更好防止外界“干扰”</li>
</ul></div><div><p><u>但是，docker虽然方便，可像计算型，有状态的服务还是建议物理机部署尤其是线上环境，像mysql之类的其实建议物理机，性能更好释放。</u></p></div><div><p>对我个人，开发调试方便当然是docker了，。</p></div><div><p>当然了，其实docker、docker-compose甚至是k8s其实是为了微服务这样的大型服务进行容器编排才能更体现它的强大。</p></div></div></div><div class="heading-wrapper"><h2 data-heading="安装Docker" class="heading" id="安装Docker"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>安装Docker</h2><div class="heading-children"><div><ul>
<li data-line="0">
<p>卸载旧版本docker（可选）</p>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> <span class="token function">apt-get</span> remove docker-ce docker-ce-cli containerd.io
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="6"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
<p>请确保你有sudo权限来执行以下操作。</p>
<ol>
<li data-line="8">更新软件包列表：</li>
</ol>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> <span class="token function">apt</span> update
</code><button class="copy-code-button">复制</button></pre>
<ol start="2">
<li data-line="14">安装必要的依赖包，以允许使用HTTPS通过apt安装Docker：</li>
</ol>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> apt-transport-https ca-certificates <span class="token function">curl</span> software-properties-common
</code><button class="copy-code-button">复制</button></pre>
<ol start="3">
<li data-line="20">添加Docker的官方GPG密钥：</li>
</ol>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">curl</span> -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
</code><button class="copy-code-button">复制</button></pre>
<ol start="4">
<li data-line="26">添加Docker的APT存储库：</li>
</ol>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token builtin class-name">echo</span> <span class="token string">"deb [signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/docker.list <span class="token operator">&gt;</span> /dev/null
</code><button class="copy-code-button">复制</button></pre>
<ol start="5">
<li data-line="32">更新一次软件包列表以确保Docker存储库已添加：</li>
</ol>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> <span class="token function">apt</span> update
</code><button class="copy-code-button">复制</button></pre>
<ol start="6">
<li data-line="38">安装Docker：</li>
</ol>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
</code><button class="copy-code-button">复制</button></pre>
<ol start="7">
<li data-line="44">安装完成后，启动Docker服务：</li>
</ol>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
</code><button class="copy-code-button">复制</button></pre>
<ol start="8">
<li data-line="50">若要使Docker在系统启动时自动启动，可以运行：</li>
</ol>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code><button class="copy-code-button">复制</button></pre>
<ol start="9">
<li data-line="56">验证Docker是否已成功安装，可以运行以下命令，它将显示Docker的版本信息：</li>
</ol>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">docker</span> --version
</code><button class="copy-code-button">复制</button></pre>
<p>现在，Docker已经成功安装在你的Ubuntu系统上，你可以开始使用它来容器化应用程序和服务。如果你需要使用<code>docker</code>命令而不需要<code>sudo</code>权限，可以将你的用户添加到<code>docker</code>组中：</p>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> <span class="token function">usermod</span> -aG <span class="token function">docker</span> <span class="token environment constant">$USER</span>
</code><button class="copy-code-button">复制</button></pre>
<p>然后注销并重新登录以使更改生效。这将允许你在不使用<code>sudo</code>的情况下运行Docker命令。<br>
另外可以为Docker配置镜像源，可选的常用镜像源有：啊里、DockerProxy、网易源、百度源、腾讯源，以下是为Docke设置镜像源的一般步骤：</p>
<ol>
<li data-line="71">
<p>打开Docker配置文件：</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">vim</span> /etc/docker/daemon.json
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="77">
<p>如果文件为空或不存在，可以创建一个。在文件中添加以下内容，将镜像源的地址替换为你选择的镜像源地址（例如，阿里云、腾讯云等）：</p>
<pre class="language-json" tabindex="0"><code class="language-json is-loaded"><span class="token punctuation">{</span>
  <span class="token property">"registry-mirrors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    	<span class="token string">"https://kidxbsby.mirror.aliyuncs.com"</span><span class="token punctuation">,</span>
        <span class="token string">"https://dockerproxy.com"</span><span class="token punctuation">,</span>
        <span class="token string">"https://hub-mirror.c.163.com"</span><span class="token punctuation">,</span>
        <span class="token string">"https://mirror.baidubce.com"</span><span class="token punctuation">,</span>
        <span class="token string">"https://ccr.ccs.tencentyun.com"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="91">
<p>保存并关闭文件。</p>
</li>
<li data-line="93">
<p>重新启动Docker服务以使更改生效：</p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
<span class="token comment"># 查看 Docker 信息，检查镜像源是否添加成功</span>
<span class="token function">sudo</span> <span class="token function">docker</span> info
</code><button class="copy-code-button">复制</button></pre>
</li>
</ol>
</li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="安装Docker Compose" class="heading" id="安装Docker_Compose"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>安装Docker Compose</h2><div class="heading-children"><div><p>请确保你已经在系统中安装了 Docker，因为 Docker Compose 通常与 Docker 一起使用。</p></div><div><ol>
<li data-line="0">
<p>下载 Docker Compose 的二进制文件。你可以在 Docker 的官方 GitHub 存储库中找到最新的稳定版本。使用 <code>curl</code> 命令下载对应版本的二进制文件，例如：</p>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> <span class="token function">curl</span> -L <span class="token string">"https://github.com/docker/compose/releases/latest/download/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -s<span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -m<span class="token variable">)</span></span>"</span> -o /usr/local/bin/docker-compose
</code><button class="copy-code-button">复制</button></pre>
<p>请注意，这个命令会下载适用于你的操作系统的 Docker Compose 二进制文件。</p>
</li>
<li data-line="8">
<p>赋予下载的 Docker Compose 二进制文件执行权限：</p>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="14">
<p>验证 Docker Compose 是否已成功安装：</p>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">docker-compose</span> --version
</code><button class="copy-code-button">复制</button></pre>
<p>这将显示安装的 Docker Compose 的版本信息。</p>
</li>
</ol></div><div><p>现在，Docker Compose 已经成功安装在你的系统上，你可以使用它来管理多个容器组成的服务。</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Portainer（可选）" class="heading" id="Portainer（可选）"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Portainer（可选）</h2><div class="heading-children"><div><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout"><div class="callout-title"><div class="callout-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content">
<ul>
<li data-line="1">一款docker可视化管理工具</li>
<li data-line="2">其实docker命令越用越熟练的我压根不太用的上，不过可视化界面面板管理还是挺香的，。</li>
</ul>
</div></div></div><div><ul>
<li data-line="0">
<p><a data-tooltip-position="top" aria-label="https://zhuanlan.zhihu.com/p/612927447" rel="noopener" class="external-link is-unresolved" href="https://zhuanlan.zhihu.com/p/612927447" target="_self">NAS上最强Docker管理神器Portainer部署安装以及汉化教程（2023年最新版本） - 知乎 (zhihu.com)</a></p>
</li>
<li data-line="2">
<p>管理远程docker服务端的方法：<a data-tooltip-position="top" aria-label="https://juejin.cn/post/7069665143109451783" rel="noopener" class="external-link is-unresolved" href="https://juejin.cn/post/7069665143109451783" target="_self">portainer管理远程docker - 掘金 (juejin.cn)</a></p>
</li>
</ul></div><div><p>直接使用汉化版安装命令：</p></div><div><ol>
<li data-line="0">先创建目录用于挂载：
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">mkdir</span> -p /mydata/portainer
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="4">用的镜像是：<code>6053537/portainer-ce</code>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">docker</span> run -d --restart<span class="token operator">=</span>always --name<span class="token operator">=</span><span class="token string">"portainer"</span> -p <span class="token number">9001</span>:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /mydata/portainer:/data <span class="token number">6053537</span>/portainer-ce
</code><button class="copy-code-button">复制</button></pre>
</li>
</ol></div></div></div><div class="heading-wrapper"><h2 data-heading="Elasticsearch" class="heading" id="Elasticsearch"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Elasticsearch</h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="安装ES本体" class="heading" id="安装ES本体"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>安装ES本体</h3><div class="heading-children"><div><blockquote>
<p>暂时记录单体部署，后面补上集群部署</p>
</blockquote></div><div><p>docker pull elasticsearch:7.4.2</p></div><div><ol>
<li data-line="0">
<p>创建挂载目录<br>
mkdir -p /mydata/elasticsearch/config<br>
mkdir -p /mydata/elasticsearch/data</p>
</li>
<li data-line="4">
<p>写入文件,可被远程任何机器访问<br>
echo "http.host: 0.0.0.0" &gt; /mydata/elasticsearch/config/elasticsearch.yml</p>
</li>
<li data-line="7">
<p>运行，暴漏两个端口  9200 访问端口 9300 节点通信端口  <strong>单节点启动</strong></p>
<pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">docker</span> run --name elasticsearch -p <span class="token number">9200</span>:9200 -p <span class="token number">9300</span>:9300 --privileged<span class="token operator">=</span>true <span class="token punctuation">\</span>
  -e <span class="token string">"discovery.type=single-node"</span> <span class="token punctuation">\</span>
  -e <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">"-Xms64m -Xms128m"</span> <span class="token punctuation">\</span>
  -v /mydata/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml <span class="token punctuation">\</span>
  -v /mydata/elasticsearch/data:/usr/share/elasticsearch/data <span class="token punctuation">\</span>
  -v /mydata/elasticsearch/plugins:/usr/share/elasticsearch/plugins <span class="token punctuation">\</span>
  -d elasticsearch:7.4.2
</code><button class="copy-code-button">复制</button></pre>
</li>
</ol></div><div><p>事实上，这将会启动失败，通过<code>docker logs elasticsearch</code>查看日志发现是无法读取挂载的目录，所以需要给挂载文件夹授予权限<br>
否则没法启动</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">chmod</span> -R <span class="token number">777</span> /mydata/elasticsearch/
</code><button class="copy-code-button">复制</button></pre></div><div><p>然后重新启动：<code>docker restart elasticsearch</code></p></div><div><p>然后设置开机自启：<code> docker update elasticsearch --restart=always</code></p></div><div><p>之后通过9200端口访问</p></div></div></div><div class="heading-wrapper"><h3 data-heading="安装kibana" class="heading" id="安装kibana"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>安装kibana</h3><div class="heading-children"><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">docker</span> pull kibana:7.4.2
<span class="token comment"># 一定记得改成自己的虚拟机（服务器地址）</span>
<span class="token function">docker</span> run --name kibana -e <span class="token assign-left variable">ELASTICSEARCH_HOSTS</span><span class="token operator">=</span>http://elasticsearch:9200 -p <span class="token number">5601</span>:5601 -d kibana:7.4.2

设置开启自启动
<span class="token function">docker</span> update Id号 --restart<span class="token operator">=</span>always
</code><button class="copy-code-button">复制</button></pre></div><div><p><strong>一定记得改成自己的虚拟机（服务器地址）</strong></p></div><div><p>正确理解：服务器直接设为服务器地址没毛病，如果是虚拟机或者本机wsl设置成了静态ip也没毛病，但如果是动态ip的话那么每次都会变化就不好了，。</p></div><div><p><u>那你说本机设置成localhost行不行？——不行</u></p></div><div><p><u>因为kibana是在docker容器中运行，这个localhost指向的是kibana容器自己的ip。</u></p></div><div><p>对于本机来说正确的做法使用elasticsearch容器名充当host访问，正常来说这应该是没问题的了，但是有的时候docker可能犯病</p></div><div><p>为了遵守“规范”，我们需要创建一个供 Elasticsearch 和 Kibana 使用的 network。这个 network 将被用于 Elasticsearch 和 Kibana 之间的通信,然后让双方都连接到这个网络。</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">docker</span> network create elastic
<span class="token function">docker</span> network connect elastic elasticsearch
<span class="token function">docker</span> network connect elastic kibana
</code><button class="copy-code-button">复制</button></pre></div><div><p>需要等一会才能访问5601端口即可。</p></div><div><p><u>附：汉化</u></p></div><div><p> kibana 7 中官方加入了中文的选项</p></div><div><p>中文包在 <code>/usr/share/kibana/node_modules/x-pack/plugins/translations/translations/zh-CN.json</code></p></div><div><p>只需要在配置文件 kibana.yml 中加入，进入容器操作。</p></div><div><pre><code>i18n.locale: "zh-CN"
</code><button class="copy-code-button">复制</button></pre></div><div><p>同理的，你也可以选择挂载目录，ELASTICSEARCH_HOSTS也可以在配置文件中修改，最后重启容器即可。</p></div></div></div><div class="heading-wrapper"><h3 data-heading="分词器 Ik 支持中文分词" class="heading" id="分词器_Ik_支持中文分词"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>分词器 Ik 支持中文分词</h3><div class="heading-children"><div><p>下载zip直接解压，放到挂载的plugins文件夹下面（下载对应版本）</p></div><div><pre><code>https://github.com/medcl/elasticsearch-analysis-ik/releases/tag/v7.4.2
</code><button class="copy-code-button">复制</button></pre></div><div><p><img alt="image-20230902213406016" src="https://article.biliimg.com/bfs/article/b6d86e2531d3a77d2c13c2e520fa037cefe64526.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p>重启Electicsearch即可，可以去kibana的dev-tools工具测试一下</p></div><div><p><img alt="image-20230902213503979" src="https://article.biliimg.com/bfs/article/4f4293683a0720f65a89799ab26f100c63004ed2.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="MYSQL" class="heading" id="MYSQL"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>MYSQL</h2><div class="heading-children"><div><ol>
<li data-line="0">
<p><strong>拉取 MySQL Docker 镜像：</strong> 打开终端并运行以下命令，从 Docker Hub 下载 MySQL Docker 镜像：</p>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">docker</span> pull mysql
</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="5">
<p><strong>创建 MySQL 容器：</strong> 一旦镜像下载完成，您可以通过以下命令创建一个 MySQL 容器：</p>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">docker</span> run --name mysql8 -p <span class="token number">3306</span>:3306 -e <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span>XXX -v /mydata/mysql8:/var/lib/mysql --restart<span class="token operator">=</span>unless-stopped -d mysql

</code><button class="copy-code-button">复制</button></pre>
</li>
<li data-line="11">
<p><strong>检查 MySQL 容器是否运行：</strong> 使用以下命令检查容器是否正在运行：</p>
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">docker</span> <span class="token function">ps</span>
</code><button class="copy-code-button">复制</button></pre>
</li>
</ol></div><div><p>如果容器正在运行，您就成功创建了一个 MySQL 容器。</p></div><div><ol start="4">
<li data-line="0"><strong>连接到 MySQL 容器：</strong> 您可以使用以下命令连接到 MySQL 容器：
<pre class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it mysql8 mysql -u root -p
</code><button class="copy-code-button">复制</button></pre>
</li>
</ol></div><div><p>然后输入您在第 3 步中设置的密码，即可进入 MySQL 数据库。</p></div><div><p>外部连接通过localhost将映射端口即可访问mysql容器服务</p></div><div><p>附：如果想查看Docker容器中mysql的ip可以执行命令：<code>docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' mysql8</code></p></div><div><p>顺便一提创建数据库时建议选择：（参考：<a data-tooltip-position="top" aria-label="https://cloud.tencent.com/developer/article/1872879" rel="noopener" class="external-link is-unresolved" href="https://cloud.tencent.com/developer/article/1872879" target="_self">MySQL几种编码格式的区别</a>）</p></div><div><ul>
<li data-line="0">
<p><mark>存储字符集：utf8mb4</mark></p>
</li>
<li data-line="2">
<p><mark>排序字符集：utf8mb4_unicode_ci</mark></p>
</li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Redis" class="heading" id="Redis"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Redis</h2><div class="heading-children"><div><p>1、Redis主体安装</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token number">1</span>、在虚拟机中新建文件夹、文件
<span class="token function">mkdir</span> -p /mydata/redis/conf
<span class="token function">touch</span> /mydata/redis/conf/redis.conf

<span class="token number">2</span>、下载镜像
<span class="token function">docker</span> pull redis

<span class="token number">3</span>、启动并挂载
<span class="token function">docker</span> run -p <span class="token number">6379</span>:6379 --name redis <span class="token punctuation">\</span>
-v /mydata/redis/data:/data <span class="token punctuation">\</span>
-v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf <span class="token punctuation">\</span>
-d redis redis-server /etc/redis/redis.conf

<span class="token number">4</span>、直接进去redis客户端。
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it redis redis-cli

<span class="token number">5</span>、添加配置，插入下面内容
// 默认是不持久化的。在配置文件中输入appendonly yes，就可以aof持久化了。最后加上密码
// 修改完docker restart redis，docker -it redis redis-cli
<span class="token function">vim</span> /mydata/redis/conf/redis.conf
appendonly <span class="token function">yes</span>
requirepass 密码

<span class="token number">6</span>、保存 重启
<span class="token function">docker</span> restart redis

<span class="token number">7</span>、设置redis容器在docker启动的时候启动
<span class="token function">docker</span> update redis --restart<span class="token operator">=</span>always
</code><button class="copy-code-button">复制</button></pre></div><div><p>2、可视化工具，开源</p></div><div><ul>
<li data-line="0">[qishibo/AnotherRedisDesktopManager: 🚀🚀🚀A faster, better and more stable Redis desktop manager <a data-tooltip-position="top" aria-label="https://github.com/qishibo/AnotherRedisDesktopManager" rel="noopener" class="external-link is-unresolved" href="https://github.com/qishibo/AnotherRedisDesktopManager" target="_self">GUI client], compatible with Linux, Windows, Mac. (github.com)</a></li>
</ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Nginx" class="heading" id="Nginx"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Nginx</h2><div class="heading-children"><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">docker</span> pull nginx:1.10
<span class="token comment"># 随便启动一个nginx实例，只是为了复制出配置，放到docker里作为镜像的统一配置</span>
<span class="token function">docker</span> run -p <span class="token number">80</span>:80 --name nginx -d nginx:1.10

<span class="token builtin class-name">cd</span> /mydata/nginx
<span class="token function">docker</span> container <span class="token function">cp</span> nginx:/etc/nginx /mydata/nginx/nginx
<span class="token comment"># 然后在外部 /mydata/nginx/nginx 有了一堆文件——&gt;移动下目录</span>
<span class="token function">mv</span> /mydata/nginx/nginx /mydata/nginx/conf
<span class="token comment"># 停掉nginx</span>
<span class="token function">docker</span> stop nginx
<span class="token function">docker</span> <span class="token function">rm</span> nginx

<span class="token comment"># 创建新的nginx</span>
<span class="token function">docker</span> run -p <span class="token number">80</span>:80 -p <span class="token number">443</span>:443 --name nginx <span class="token punctuation">\</span>
-v /mydata/nginx/html:/usr/share/nginx/html <span class="token punctuation">\</span>
-v /mydata/nginx/logs:/var/log/nginx <span class="token punctuation">\</span>
-v /mydata/nginx/conf:/etc/nginx <span class="token punctuation">\</span>
-d nginx:1.10

<span class="token comment"># 注意一下这个路径映射到了/usr/share/nginx/html，我们在nginx配置文件中是写/usr/share/nginx/html，不是写/mydata/nginx/html</span>

<span class="token function">docker</span> update nginx --restart<span class="token operator">=</span>always

<span class="token comment"># 测试Nginx是否成功</span>
<span class="token builtin class-name">cd</span> /mydata/nginx/html/
<span class="token function">vim</span> index.html
<span class="token comment">#随便写写，测试 http://192.168.56.10:80</span>
</code><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h2 data-heading="RabbitMQ" class="heading" id="RabbitMQ"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>RabbitMQ</h2><div class="heading-children"><div><p>Docker安装RabbitMQ</p></div><div><pre class="language-php" tabindex="0"><code class="language-php is-loaded">docker run <span class="token operator">-</span>d <span class="token operator">--</span>name rabbitmq <span class="token operator">-</span>p <span class="token number">5671</span><span class="token punctuation">:</span><span class="token number">5671</span> <span class="token operator">-</span>p <span class="token number">5672</span><span class="token punctuation">:</span><span class="token number">5672</span> \
<span class="token operator">-</span>p <span class="token number">4369</span><span class="token punctuation">:</span><span class="token number">4369</span>  <span class="token operator">-</span>p <span class="token number">25672</span><span class="token punctuation">:</span><span class="token number">25672</span> <span class="token operator">-</span>p <span class="token number">15671</span><span class="token punctuation">:</span><span class="token number">15671</span> <span class="token operator">-</span>p <span class="token number">15672</span><span class="token punctuation">:</span><span class="token number">15672</span> \
rabbitmq<span class="token punctuation">:</span>management
</code><button class="copy-code-button">复制</button></pre></div><div><p>说明：</p></div><div><ul>
<li data-line="0">4369,25672 (Erlang发现&amp;集群端口）</li>
<li data-line="1">5672,5671（AMQP端口）</li>
<li data-line="2">15672（web管理后台端口）</li>
<li data-line="3">61613，61614（STOMP协议端口）</li>
<li data-line="4">1883，8883（MQTT协议端口）</li>
</ul></div><div><p>设置开机自启动：</p></div><div><pre class="language-php" tabindex="0"><code class="language-php is-loaded">docker update rabbitmq <span class="token operator">--</span>restart<span class="token operator">=</span>always
</code><button class="copy-code-button">复制</button></pre></div><div><p>访问管理页面：host:15672；账号：guest 密码:  guest<br>
另外配置常用的延时插件：可参考<a data-tooltip-position="top" aria-label="https://blog.csdn.net/zhuyu19911016520/article/details/103633482" rel="noopener" class="external-link is-unresolved" href="https://blog.csdn.net/zhuyu19911016520/article/details/103633482" target="_self">RabbitMQ 安装延迟队列插件实现延时消息_闪耀的瞬间的博客-CSDN博客</a></p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token comment"># 拷贝插件</span>
<span class="token function">docker</span> <span class="token function">cp</span> /rabbitmq_delayed_message_exchange-3.8.0.ez 982b190bf852:/plugins
<span class="token comment"># 进入容器并启动插件</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it rabbitmq /bin/bash
rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_delayed_message_exchange
<span class="token comment"># 重启</span>
<span class="token function">docker</span> restart rabbitmq
</code><button class="copy-code-button">复制</button></pre></div><div><p>注意插件的版本号要和RabbitMQ保持版本对应。</p></div><div><p>关于用户和权限：<a data-tooltip-position="top" aria-label="https://www.cnblogs.com/zwwhnly/p/10918665.html" rel="noopener" class="external-link is-unresolved" href="https://www.cnblogs.com/zwwhnly/p/10918665.html" target="_self">RabbitMQ使用教程（二）RabbitMQ用户管理,角色管理及权限设置 - 申城异乡人 - 博客园 (cnblogs.com)</a></p></div><div><p><img alt="img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABL0lEQVQ4T53SPyjgYRzH8ReLRQZKt12KRemmk79ZLJRSBulcBsPRucVkOQYmg0QRg0lRrijzleV0g0FShssNisIgg0yip75P/ZIkz/Y838/7eb7P5/sp8c5V8gL3Ab1oidofbOOqqH0ODmISW6hFFQ7RgTlsZLgIDqMPX3CDc7TjPyqxh3msJTiDNdhBE+7j1gUMYAlTAR+H5iyDP1COz6jAEcZRHS/Vx2Uz0clyBleQismYOqR9qjXiJ3YD7EYPRjO4GsIEHIToE65xUXAzud2Fbxn8jlIsFkRl6Mc//A1jRpC+tZrBZPsvdOIh4LS/i3ZvcRouN+C2OI40hjaMIb12go9oDkenMYvN4jhyh18xhN+YiLbS8FuRHF1/KQD5LEcuiR+xH5G7fC1yb478E2PUOQ+9zsDyAAAAAElFTkSuQmCC" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div></div></div><div class="heading-wrapper"><h2 data-heading="RocketMQ 4.5.1" class="heading" id="RocketMQ_4.5.1"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>RocketMQ 4.5.1</h2><div class="heading-children"><div><p>安装 NameServer</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">docker</span> run -d -p <span class="token number">9876</span>:9876 --name rmqnamesrv foxiswho/rocketmq:server-4.5.1
</code><button class="copy-code-button">复制</button></pre></div><div><p>安装 Brocker。</p></div><div><p>1）新建配置目录。</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">mkdir</span> -p /mydata/rocketmq/conf
</code><button class="copy-code-button">复制</button></pre></div><div><p>2）新建配置文件 <code>broker.conf</code>。</p></div><div><pre class="language-yaml" tabindex="0"><code class="language-yaml is-loaded">brokerClusterName = DefaultCluster
brokerName = broker<span class="token punctuation">-</span>a
brokerId = 0
deleteWhen = 04
fileReservedTime = 48
brokerRole = ASYNC_MASTER
flushDiskType = ASYNC_FLUSH
<span class="token comment"># 此处为本地ip, 如果部署服务器, 需要填写服务器外网ip</span>
brokerIP1 = xx.xx.xx.xx
</code><button class="copy-code-button">复制</button></pre></div><div><p>3）创建容器。</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">docker</span> run -d <span class="token punctuation">\</span>
-p <span class="token number">10911</span>:10911 <span class="token punctuation">\</span>
-p <span class="token number">10909</span>:10909 <span class="token punctuation">\</span>
--name rmqbroker <span class="token punctuation">\</span>
--link rmqnamesrv:namesrv <span class="token punctuation">\</span>
-v /mydata/rocketmq/conf/broker.conf:/etc/rocketmq/broker.conf <span class="token punctuation">\</span>
-e <span class="token string">"NAMESRV_ADDR=namesrv:9876"</span> <span class="token punctuation">\</span>
-e <span class="token string">"JAVA_OPTS=-Duser.home=/opt"</span> <span class="token punctuation">\</span>
-e <span class="token string">"JAVA_OPT_EXT=-server -Xms512m -Xmx512m"</span> <span class="token punctuation">\</span>
foxiswho/rocketmq:broker-4.5.1
</code><button class="copy-code-button">复制</button></pre></div><div><p>安装 rocketmq 控制台。</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">docker</span> pull pangliang/rocketmq-console-ng
<span class="token function">docker</span> run -d <span class="token punctuation">\</span>
--link rmqnamesrv:namesrv <span class="token punctuation">\</span>
-e <span class="token string">"JAVA_OPTS=-Drocketmq.config.namesrvAddr=namesrv:9876 -Drocketmq.config.isVIPChannel=false"</span> <span class="token punctuation">\</span>
--name rmqconsole <span class="token punctuation">\</span>
-p <span class="token number">8088</span>:8080 <span class="token punctuation">\</span>
-t pangliang/rocketmq-console-ng
</code><button class="copy-code-button">复制</button></pre></div><div><p>运行成功，稍等几秒启动时间，浏览器输入 localhost:8088 查看。</p></div><div><p>上面涉及到了-link、-e、-i-t（一般合起来-it）等我很少用到的docker选项，需要再好好复习捏，可参考：<a data-tooltip-position="top" aria-label="https://www.cnblogs.com/alvisClub/p/17091305.html" rel="noopener" class="external-link is-unresolved" href="https://www.cnblogs.com/alvisClub/p/17091305.html" target="_self">如何正确使用docker run -i -t -d 参数 - iiiiiiiivan - 博客园 (cnblogs.com)</a></p></div></div></div><div class="heading-wrapper"><h2 data-heading="Nacos 2.1.2" class="heading" id="Nacos_2.1.2"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Nacos 2.1.2</h2><div class="heading-children"><div><p>通过简易版方式安装，</p></div><div><pre class="language-shell" tabindex="0"><code class="language-shell is-loaded"><span class="token function">docker</span> run <span class="token punctuation">\</span>
-d -p <span class="token number">8848</span>:8848 <span class="token punctuation">\</span>
-p <span class="token number">9848</span>:9848 <span class="token punctuation">\</span>
--name nacos2 <span class="token punctuation">\</span>
-e <span class="token assign-left variable">MODE</span><span class="token operator">=</span>standalone <span class="token punctuation">\</span>
-e <span class="token assign-left variable">TIME_ZONE</span><span class="token operator">=</span><span class="token string">'Asia/Shanghai'</span> <span class="token punctuation">\</span>
nacos/nacos-server:v2.1.2
</code><button class="copy-code-button">复制</button></pre></div><div><p>运行成功，稍等几秒启动时间，浏览器输入 http://localhost:8848/nacos/index.html 查看控制台。</p></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="部署上线" class="heading" id="部署上线">部署上线</h1><div class="heading-children"><div><ul>
<li data-line="0">项目打成jar包，再通过dockerfile、docker-compose文件一键构建镜像和部署，手动执行sh脚本</li>
<li data-line="1"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>结合Git同步的工作流：
<ul>
<li data-line="2">上传代码相关文件至GitHub等托管平台</li>
<li data-line="3">Linux编写sh脚本周期pull拉取git仓库最新代码比较，更新则自动通过docker-compose文件重新自动部署</li>
</ul>
</li>
</ul></div></div></div><div class="heading-wrapper"><h1 data-heading="默认启动账户" class="heading" id="默认启动账户">默认启动账户</h1><div class="heading-children"><div><p>默认是以普通用户也就是安装启动时创建的用户登录</p></div><div><p>这对我们来说很麻烦，我们希望直接以root启动</p></div><div><p>在原来的启动命令中加上<code>-u root</code>即可</p></div><div><p><img alt="image-20240216122746770" src="https://i0.hdslb.com/bfs/article/04e60153d9161fea006dd50cb75eb37b688545001.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div><p>但其实更多是使用WindTerm这样的工具通过ssh连接wsl</p></div></div></div><div class="heading-wrapper"><h1 data-heading="WSL覆盖本机服务问题(优先级似乎比较高)" class="heading" id="WSL覆盖本机服务问题(优先级似乎比较高)">WSL覆盖本机服务问题(优先级似乎比较高)</h1><div class="heading-children"><div><p>WSL中已经启动了一个Nginx，默认80端口已经被他占用了</p></div><div><p>即便通过vscode启动了前端项目（没显示报错）</p></div><div><p>其实我们直接在浏览器访问的时候其实已经被覆盖掉了，我们访问的是wsl中的Nginx容器</p></div></div></div><div class="heading-wrapper"><h1 data-heading="IDEA配置docker" class="heading" id="IDEA配置docker">IDEA配置docker</h1><div class="heading-children"><div><p><a data-tooltip-position="top" aria-label="https://www.bilibili.com/video/BV1Yc411W7yr/?p=1&amp;spm_id_from=pageDriver" rel="noopener" class="external-link is-unresolved" href="https://www.bilibili.com/video/BV1Yc411W7yr/?p=1&amp;spm_id_from=pageDriver" target="_self">idea连接远程docker教程_哔哩哔哩_bilibili</a></p></div><div><p><a data-tooltip-position="top" aria-label="https://cloud.tencent.com/developer/article/1495388" rel="noopener" class="external-link is-unresolved" href="https://cloud.tencent.com/developer/article/1495388" target="_self">Docker远程连接设置-腾讯云开发者社区-腾讯云 (tencent.com)</a></p></div><div class="mod-footer"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="outline-tree tree-container"><div class="tree-item nav-folder mod-root" data-depth="0"><div class="tree-item-self nav-folder-title"><div class="tree-item-inner nav-folder-title-content">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item-children nav-folder-children"><div class="nav-folder-spacer"></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#前言" data-path="#前言"><div class="tree-item-inner heading-link" heading-name="前言">前言</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#WSL基础知识和命令" data-path="#WSL基础知识和命令"><div class="tree-item-inner heading-link" heading-name="WSL基础知识和命令">WSL基础知识和命令</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#WSL配置深度学习环境" data-path="#WSL配置深度学习环境"><div class="tree-item-inner heading-link" heading-name="WSL配置深度学习环境">WSL配置深度学习环境</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#conda安装" data-path="#conda安装"><div class="tree-item-inner heading-link" heading-name="conda安装">conda安装</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#conda配置" data-path="#conda配置"><div class="tree-item-inner heading-link" heading-name="conda配置">conda配置</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#conda备份和卸载" data-path="#conda备份和卸载"><div class="tree-item-inner heading-link" heading-name="conda备份和卸载">conda备份和卸载</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#conda常用命令" data-path="#conda常用命令"><div class="tree-item-inner heading-link" heading-name="conda常用命令">conda常用命令</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#wsl连接开发" data-path="#wsl连接开发"><div class="tree-item-inner heading-link" heading-name="wsl连接开发">wsl连接开发</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#WSL开启ssh服务" data-path="#WSL开启ssh服务"><div class="tree-item-inner heading-link" heading-name="WSL开启ssh服务">WSL开启ssh服务</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#WSL配置SSH服务" data-path="#WSL配置SSH服务"><div class="tree-item-inner heading-link" heading-name="WSL配置SSH服务">WSL配置SSH服务</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#SSH连接" data-path="#SSH连接"><div class="tree-item-inner heading-link" heading-name="SSH连接">SSH连接</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#Linux开发习惯" data-path="#Linux开发习惯"><div class="tree-item-inner heading-link" heading-name="Linux开发习惯">Linux开发习惯</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#LInux目录含义" data-path="#LInux目录含义"><div class="tree-item-inner heading-link" heading-name="LInux目录含义">LInux目录含义</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#我的习惯" data-path="#我的习惯"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="我的习惯">我的习惯</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#docker配置统一管理" data-path="#docker配置统一管理"><div class="tree-item-inner heading-link" heading-name="docker配置统一管理">docker配置统一管理</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#项目代码存放" data-path="#项目代码存放"><div class="tree-item-inner heading-link" heading-name="项目代码存放">项目代码存放</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#项目部署" data-path="#项目部署"><div class="tree-item-inner heading-link" heading-name="项目部署">项目部署</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#日志文件和配置文件" data-path="#日志文件和配置文件"><div class="tree-item-inner heading-link" heading-name="日志文件和配置文件">日志文件和配置文件</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#脚本文件" data-path="#脚本文件"><div class="tree-item-inner heading-link" heading-name="脚本文件">脚本文件</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#小结" data-path="#小结"><div class="tree-item-inner heading-link" heading-name="小结">小结</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#部署中间件" data-path="#部署中间件"><div class="tree-item-inner heading-link" heading-name="部署中间件">部署中间件</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#思考个问题" data-path="#思考个问题"><div class="tree-item-inner heading-link" heading-name="思考个问题">思考个问题</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#安装Docker" data-path="#安装Docker"><div class="tree-item-inner heading-link" heading-name="安装Docker">安装Docker</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#安装Docker_Compose" data-path="#安装Docker_Compose"><div class="tree-item-inner heading-link" heading-name="安装Docker Compose">安装Docker Compose</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#Portainer（可选）" data-path="#Portainer（可选）"><div class="tree-item-inner heading-link" heading-name="Portainer（可选）">Portainer（可选）</div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#Elasticsearch" data-path="#Elasticsearch"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Elasticsearch">Elasticsearch</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#安装ES本体" data-path="#安装ES本体"><div class="tree-item-inner heading-link" heading-name="安装ES本体">安装ES本体</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#安装kibana" data-path="#安装kibana"><div class="tree-item-inner heading-link" heading-name="安装kibana">安装kibana</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#分词器_Ik_支持中文分词" data-path="#分词器_Ik_支持中文分词"><div class="tree-item-inner heading-link" heading-name="分词器 Ik 支持中文分词">分词器 Ik 支持中文分词</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#MYSQL" data-path="#MYSQL"><div class="tree-item-inner heading-link" heading-name="MYSQL">MYSQL</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#Redis" data-path="#Redis"><div class="tree-item-inner heading-link" heading-name="Redis">Redis</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#Nginx" data-path="#Nginx"><div class="tree-item-inner heading-link" heading-name="Nginx">Nginx</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#RabbitMQ" data-path="#RabbitMQ"><div class="tree-item-inner heading-link" heading-name="RabbitMQ">RabbitMQ</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#RocketMQ_4.5.1" data-path="#RocketMQ_4.5.1"><div class="tree-item-inner heading-link" heading-name="RocketMQ 4.5.1">RocketMQ 4.5.1</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#Nacos_2.1.2" data-path="#Nacos_2.1.2"><div class="tree-item-inner heading-link" heading-name="Nacos 2.1.2">Nacos 2.1.2</div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#部署上线" data-path="#部署上线"><div class="tree-item-inner heading-link" heading-name="部署上线">部署上线</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#默认启动账户" data-path="#默认启动账户"><div class="tree-item-inner heading-link" heading-name="默认启动账户">默认启动账户</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#WSL覆盖本机服务问题(优先级似乎比较高)" data-path="#WSL覆盖本机服务问题(优先级似乎比较高)"><div class="tree-item-inner heading-link" heading-name="WSL覆盖本机服务问题(优先级似乎比较高)">WSL覆盖本机服务问题(优先级似乎比较高)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-item-self is-clickable" href="技术/开发利器/打造舒适开发环境.html#IDEA配置docker" data-path="#IDEA配置docker"><div class="tree-item-inner heading-link" heading-name="IDEA配置docker">IDEA配置docker</div></a><div class="tree-item-children"></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>